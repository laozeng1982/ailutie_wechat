<!--records.wxml-->
<view class="thiscontainer">

    <!-- 这是Toast -->
    <include src="../ui/toast/toast.wxml" />

    <view class="button-group">
        <button class="dateMoveButton" type="default" bindtap="onLastMonth"> 上月</button>
        <button class="dateButton" type="default" bindtap="onToToday">{{curYear+' 年 '+curMonth +' 月 ' + curDate+ '日'}}</button>
        <button class="dateMoveButton" type="default" bindtap="onNextMonth">下月</button>
    </view>

    <!-- 日历面板 -->
    <view class="calender_panel">
        <!-- 日历头 -->
        <view class="calender_box">
            <view class="calender_box_header">
                <view class="weekday_label_header">
                    <text class="redcolor">日</text>
                </view>
                <view class="weekday_label_header">一</view>
                <view class="weekday_label_header">二</view>
                <view class="weekday_label_header">三</view>
                <view class="weekday_label_header">四</view>
                <view class="weekday_label_header">五</view>
                <view class="weekday_label_header">
                    <text class="redcolor">六</text>
                </view>
            </view>
        </view>

        <!-- 日历中每天的显示 -->
        <view class="calender_box" wx:for="{{dateList}}" wx:for-item="week" style="{{index==0?'justfiy-content: flex-end;':''}}">
            <view class="weekday_label_days" wx:for="{{week}}">
                <view wx:for-item="{{dateListWithPlan}}" class="{{item.hasPlan?'image_overlay_left':''}}">
                    <image class='image_overlay_left' src="{{item.hasPlan?'../image/weightlifting1.png':''}}"></image>
                </view>

                <text class="{{item.value==selectedDate?'active_date_overlay':''}} {{item.value==today?'today':''}} {{item.selected?'selected_date_overlay':''}}" bindtap="onDateSelected" bindlongpress="onDateLongPress" data-date="{{item}}">{{item.date}}</text>
<!--                 
                <view wx:for-item="{{dateListWithPlan}}" class="{{item.hasPlan?'image_overlay_middle':''}}">
                    <image class='image_overlay_middle' src="{{item.hasPlan?'../image/weightlifting_selected.png':''}}"></image>
                </view> -->
            </view>
        </view>
    </view>

    <!-- 记录列表 -->
    <view class="planAndActionContainer" wx:if="{{!showDateLongPress}}">
        <scroll-view class="scrollview" scroll-y="true">

            <view class="listSingleMovement" wx:for="{{curRecords.movementList}}" class='movement-item' animation='{{item.wrapAnimation}}'>
                <view id='{{item.mvId}}' class='movement'>
                    <view class="{{item.mvId%2==0?'tableCornor1':'tableCornor2'}}" data-index="{{index}}">
                        <view id='{{item.mvId}}' class="movementName" bindtap="onMovementTap">
                            <view class="tableItem"> {{item.mvId}} {{item.mvInfo.partName}}</view>
                            <view class="tableItemName"> {{item.mvInfo.mvName}}</view>
                            <view class="tableItem"> {{item.contents.curFinishedGpCount}}/{{item.contents.planGpCount}}组</view>
                            <view class="tableItem"> {{item.contents.details[0].actualCount}}/{{item.contents.details[0].planCount}}次</view>
                            <view class="tableItem"> {{item.contents.details[0].actualWeight}}/{{item.contents.details[0].planWeight}}Kg</view>
                        </view>
                    </view>
                </view>
            </view>

        </scroll-view>
    </view>

    <view class="planAndActionContainer" wx:if="{{showDateLongPress}}">
        <view class="whiteSpaceNoBoder "></view>

        <radio-group bindchange="onModelChange ">
            <view class="choiceItemContainer ">
                <view class="choiceItemInnerContainer ">
                    <view id="1 " class="choiceItem ">
                        <radio value="1 " checked="{{true}} " />
                        <view class="classname ">拷贝到这些天（多选，直接戳日期）</view>
                    </view>
                </view>

                <view class="choiceItemInnerContainerHigher ">
                    <view id="2 " class="choiceItem ">
                        <radio value="2 " checked="{{false}}" />

                        <picker mode="date " value="{{endDate}} " start="{{today}} " end="2099-12-31 " bindchange="onDateChange ">
                            <view class="classname ">设为每周N的计划，截止: {{endDate}}</view>
                        </picker>
                    </view>
                    <view class="choiceItemCheckboxGroup ">
                        <checkbox-group wx:for="{{weekList}}">
                            <view id="{{item.id}}">
                                {{item.value}}
                                <checkbox value="{{item.value}} " checked="{{item.checked}}" />
                            </view>
                        </checkbox-group>
                    </view>
                </view>

                <view class="choiceItemInnerContainer ">
                    <view id="3 " class="choiceItem ">
                        <radio value="3 " checked="{{false}} " />
                        <view class="classname ">删除这天的计划</view>
                    </view>
                </view>

            </view>
        </radio-group>


        <view class="button-group">
            <button class="dateMoveButton" type="default" style="plain" bindtap="onCancel"> 取消</button>
            <button class="dateMoveButton" type="default" bindtap="onConfirm">确定</button>
        </view>
    </view>



    <!-- 这是Modal -->
    <include src="../ui/modal/RecordsModal.wxml" />
</view>